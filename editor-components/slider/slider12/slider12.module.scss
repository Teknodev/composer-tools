@use "../../../composer-base-components/base/utitilities/viewports.module.scss"
  as *;

:root {
  --slider-gutter: var(--composer-gap-sm);
  --arrow-icon-size: 4rem;
  --slide-speed: 620ms;
  --slide-ease: cubic-bezier(0.22, 0.61, 0.36, 1);
  --card-width: 390px;
  --media-w: 390px;
  --media-h: 340px;
}

.container {
  background-color: var(--composer-html-background);
  container-type: inline-size;
  --arrow-icon-size: 4rem;

  .max-content {
    .header {
      .header-content {
        margin-inline: auto;

        .title {
          width: 100%;
          margin-bottom: var(--composer-gap-md);
          text-wrap: balance;
        }

        .description {
          width: 100%;
          color: var(--composer-tertiary-color);
          margin-top: var(--composer-gap-xs);
        }
      }
    }

    .slider-wrap {
      --arrows-extra-gap: var(--composer-gap-xl);
      padding-top: var(--arrows-extra-gap);
      position: relative;
      overflow: visible;
      margin-bottom: 3rem;
      touch-action: pan-x;
      overscroll-behavior-x: contain;
      overscroll-behavior-y: contain;
      -webkit-tap-highlight-color: transparent;

      .arrows {
        position: absolute;
        right: var(--composer-gap-xs);
        top: 0;
        display: flex;
        gap: var(--composer-gap-sm);
        z-index: 1000;
      }

      .prevArrow,
      .nextArrow {
        background: transparent;
        display: inline-grid;
        place-items: center;
        box-sizing: content-box;
        cursor: pointer;
        color: var(--composer-font-color-primary);
        transition: transform 0.15s ease, border-color 0.15s ease;
        width: var(--arrow-icon-size);
        height: var(--arrow-icon-size);

        &:hover {
          transform: scale(1.04);
          border-color: var(--composer-primary-color);
          background: transparent !important;
          color: var(--composer-font-color-primary) !important;
          box-shadow: none !important;
        }
        &:active {
          transform: scale(0.98);
        }
        &:focus,
        &:focus-visible {
          outline: 2px solid var(--composer-primary-color);
          outline-offset: 2px;
        }
        &:focus:not(:focus-visible) {
          outline: none;
        }
      }
    }

    .slider-parent {
      :global(.slick-slider),
      :global(.slick-list) {
        overflow: visible;
      }

      :global(.slick-track) {
        display: flex !important;
        gap: 2rem;
        align-items: stretch;
        transition-property: transform !important;
        transition-duration: var(--slide-speed) !important;
        transition-timing-function: var(--slide-ease) !important;
        will-change: transform;
        backface-visibility: hidden;
        transform: translateZ(0);
      }

      :global(.slick-slide) {
        height: auto;
        user-select: none;
        -webkit-user-select: none;
      }

      :global(.slick-slide > div) {
        height: 100%;
      }
    }

    .slide {
      width: var(--card-width) !important;
      will-change: transform;
      backface-visibility: hidden;
      transform: translateZ(0);
    }

    .card {
      display: flex;
      flex-direction: column;
      height: 100%;
      border-radius: var(--composer-border-radius-sm);
      user-select: none;
      -webkit-user-select: none;
    }

    .media {
      position: relative;
      width: var(--media-w);
      height: var(--media-h);
      overflow: hidden;
      border-radius: var(--composer-border-radius-sm);
      background: color-mix(
        in srgb,
        var(--composer-html-background),
        black 10%
      );
      display: grid;
      place-items: center;
    }

    .image,
    .video {
      width: 100%;
      height: 100%;
      display: block;
      object-fit: cover;
      object-position: center center;
      -webkit-user-drag: none;
      pointer-events: none;
    }

    .text {
      padding: var(--composer-gap-md);

      .header {
        margin: 0 0 var(--composer-gap-xs) 0;
        color: var(--composer-font-color-primary);
        text-align: left;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        line-clamp: 2;
        overflow: hidden;
      }

      .desc {
        color: var(--composer-tertiary-color);
        margin: 0;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        line-clamp: 3;
        overflow: hidden;
      }
    }

    .card--textOnly {
      min-height: calc(var(--media-h) + 140px);
      display: grid;
      place-items: center;
      padding: var(--composer-gap-lg) var(--composer-gap-md);
    }

    .text--centered {
      display: grid;
      justify-items: center;
      text-align: center;

      .header {
        -webkit-line-clamp: unset;
        line-clamp: unset;
        margin-bottom: var(--composer-gap-xs);
      }

      .desc {
        text-align: center !important;
        -webkit-line-clamp: unset;
        line-clamp: unset;
        max-width: 60ch;
      }
    }
  }

  @container (max-width: #{$composer-tablet-width}) {
    --arrow-icon-size: 3rem;

    .max-content {
      width: 100% !important;

      .header {
        .header-content {
          .title {
            margin-bottom: var(--composer-gap-sm);
          }
          .description {
            opacity: 0.9;
            max-width: 70ch;
          }
        }
      }

      .slide {
        &.wide {
          width: var(--card-width) !important;

          .media {
            width: var(--media-w);
            height: var(--media-h);
          }
        }
      }

      .text {
        padding: var(--composer-gap-sm) var(--composer-gap-md);
      }

      .slider-wrap {
        margin-bottom: 1rem;
      }
    }
  }

  @container (min-width: #{ $composer-tablet-width }) {
    .max-content {
      .slide {
        &.wide {
          width: calc(var(--card-width) * 1.5) !important;

          .media {
            width: calc(var(--media-w) * 1.5);
            height: var(--media-h);
          }
        }
      }
    }
  }

  @container (max-width: #{$composer-phone-width}) {
    --arrow-icon-size: 3rem;
    --slider-gutter: var(--composer-gap-xs);

    .max-content {
      width: 100% !important;

      .text {
        padding: var(--composer-gap-xs) var(--composer-gap-md);
      }
      .header {
        margin-bottom: 0 !important;
        padding-bottom: 0 !important;

        .header-content {
          gap: 0 !important;

          .description {
            margin-bottom: 0 !important;
            font-size: var(--composer-font-size-md) !important;
          }
        }
      }

      .slider-wrap {
        margin-bottom: 1rem;
        margin-top: 1rem;
      }

      .card--textOnly {
        min-height: calc(var(--media-h) * 0.7 + 120px);
        padding: var(--composer-gap-md) var(--composer-gap-md);
      }
    }
  }
}
