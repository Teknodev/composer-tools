name: Notify Parent Repo
on:
  push:
    paths:
      - 'editor-components/**'

jobs:
  notify:
    runs-on: ubuntu-latest
    env:
      PARENT_ORG: ${{ secrets.PARENT_ORG }}
      PARENT_REPO: ${{ secrets.PARENT_REPO }}
    steps:
      - name: Echo URL
        run: |
          echo "Dispatch URL: https://api.github.com/repos/${PARENT_ORG}/${PARENT_REPO}/repository_dispatch"

      - name: Trigger parent repository workflow
        run: |
          URL="https://api.github.com/repos/${PARENT_ORG}/${PARENT_REPO}/repository_dispatch"
          echo "Calling: $URL"

          curl -X POST \
            -H "Authorization: token ${{ secrets.PARENT_REPO_TOKEN }}" \
            -H "Accept: application/vnd.github.v3+json" \
            "$URL" \
            -d '{"event_type":"submodule_updated"}'
